# ==================== SEN1-2 数据集配置 ====================
# 适用于 SEN1-2 数据集
# 数据结构: G:/Data/SEN1-2/train/s1/*.png, G:/Data/SEN1-2/train/s2/*.png

# ==================== 数据配置 ====================
data:
  type: "sen12"         # 使用SEN1-2数据集加载器

  # SEN1-2数据集根目录
  root: "/root/SEN1-2"

  train_ratio: 0.9      # 90%训练，10%验证（当没有val目录时）
  test_ratio: 0.1

  normalize:
    enabled: true
    input_range: [0.0, 1.0]

  # SEN1-2通道配置
  # S1: 3通道 (SAR)
  # S2: 3通道 (光学)
  channels:
    optical:
      input: 3
      use: 3
      indices: [0, 1, 2]
    sar:
      input: 3
      use: 3
      indices: [0, 1, 2]

  dataloader:
    batch_size: 4
    num_workers: 4
    pin_memory: true
    prefetch_factor: 2
    persistent_workers: true

# ==================== 模型配置 ====================
model:
  type: "srdm"
  name: "SRDM"
  output_range: [-1.0, 1.0]

srdm:
  base_ch: 64
  ch_mults: [1, 2, 4, 8]
  num_blocks: 2
  time_emb_dim: 256
  dropout: 0.1
  num_heads: 8

# ==================== 损失配置 ====================
srdm_loss:
  enabled:
    - noise_mse
    - x0_mse
    - x0_l1
  weights:
    noise_mse: 1.0
    x0_mse: 0.5
    x0_l1: 0.3

# ==================== 扩散配置 ====================
diffusion:
  num_timesteps: 1000
  beta_start: 0.0001
  beta_end: 0.02
  sampling:
    enabled: true
    use_ddim: true
    ddim_steps: 50
    ddim_eta: 0.0

# ==================== 训练配置 ====================
training:
  num_epochs: 100

  optimizer:
    type: "adamw"
    lr: 0.0002
    weight_decay: 0.01
    betas: [0.9, 0.999]

  scheduler:
    type: "cosine"
    warmup_epochs: 5
    min_lr: 0.000001

  mixed_precision:
    enabled: true

  gradient_clipping:
    enabled: true
    max_norm: 1.0

  gradient_accumulation:
    enabled: true
    steps: 2

# ==================== 验证配置 ====================
validation:
  enabled: true
  interval: 10
  batch_size: 4
  max_samples: 50
  save_results:
    enabled: true
    save_dir: "results"

# ==================== 设备配置 ====================
device:
  use_cuda: true
  random_seed: 42
  deterministic: false

# ==================== 日志配置 ====================
logging:
  level: "INFO"
  log_dir: "logs"
  tensorboard: true
